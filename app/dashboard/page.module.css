/* Grid Layout - Horizontal Scroll for Single Row */
.grid {
    display: flex;
    gap: 1.5rem;
    overflow-x: auto;
    padding-bottom: 1.5rem;
    /* Space for scrollbar/shadow */
    margin-bottom: 0.5rem;
    /* scroll-behavior: smooth;  <-- REMOVED: This causes the infinite loop to break/stuck */
    -ms-overflow-style: none;
    /* IE and Edge */
    scrollbar-width: none;
    /* Firefox */
}

/* Hide scrollbar for Chrome, Safari and Opera */
.grid::-webkit-scrollbar {
    display: none;
}

/* Wrapper for Grid and Nav Buttons */
.gridContainer {
    position: relative;
    width: 100%;
}

/* Manual Navigation Buttons */
.navBtn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 50;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(4px);
    border: 1px solid var(--border);
    color: var(--foreground);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    opacity: 0;
    pointer-events: none;
    /* Prevent clicks when hidden */
}

.gridContainer:hover .navBtn {
    opacity: 1;
    pointer-events: auto;
    /* Enable clicks when visible */
}

.navBtn:hover {
    background: var(--primary);
    color: white;
    transform: translateY(-50%) scale(1.1);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
}

.prevBtn {
    left: 10px;
    /* Inside the container to ensure visibility */
}

.nextBtn {
    right: 10px;
}

/* Serial Number */
.serialNumber {
    position: absolute;
    top: 1rem;
    right: 1.5rem;
    font-size: 2.5rem;
    font-weight: 800;
    color: rgba(0, 0, 0, 0.05);
    /* Very light watermark style */
    pointer-events: none;
    line-height: 1;
}

/* Metric Card */
.card {
    position: relative;
    padding: 1.5rem;
    border-radius: 16px;
    background: var(--card);
    border: 1px solid rgba(0, 0, 0, 0.05);
    min-width: 320px;
    /* Fixed width for consistent row */
    flex: 0 0 auto;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    background: rgba(255, 255, 255, 0.95);
    /* Slightly brighter/opaque on hover */
}

/* Dark mode handling if needed, or just general hover tweak */
@media (prefers-color-scheme: dark) {
    .card:hover {
        background: rgba(30, 41, 59, 0.95);
    }
}

.cardHeader {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.iconBox {
    width: 42px;
    height: 42px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--card-color);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

.cardTitle {
    font-size: 1rem;
    font-weight: 600;
    color: var(--foreground);
    opacity: 0.9;
}

/* Main Value (Center Day) */
.mainValueContainer {
    text-align: center;
    margin-bottom: 1.5rem;
}

.mainValueLabel {
    font-size: 0.8rem;
    text-transform: uppercase;
    color: var(--muted-foreground);
    letter-spacing: 1px;
    margin-bottom: 0.25rem;
}

.mainValue {
    font-size: 2.5rem;
    font-weight: 800;
    line-height: 1;
    color: var(--foreground);
    background: linear-gradient(180deg, var(--foreground) 0%, var(--foreground) 50%, rgba(0, 0, 0, 0.6) 100%);
    -webkit-background-clip: text;
    background-clip: text;
}

.separator {
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--border), transparent);
    margin-bottom: 1rem;
}

/* Sub Values Row */
.subValuesGrid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 0.5rem;
    text-align: center;
}

.subValueItem {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.subValueLabel {
    font-size: 0.75rem;
    color: var(--muted-foreground);
}

.subValue {
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--foreground);
}

/* Toggle Button */
.toggleBtn {
    position: absolute;
    bottom: 0;
    right: 0;
    background: var(--card-color);
    color: white;
    border: none;
    border-top-left-radius: 12px;
    border-bottom-right-radius: 12px;
    /* Matches card corner */
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
}

.toggleBtn:hover {
    width: 36px;
    height: 36px;
}

.container {
    padding: 0.5rem 2rem;
    width: 100%;
    max-width: 100%;
    /* Allow full width scrolling */
    margin: 0 auto;
    overflow-x: visible;
    /* Changed to visible so nav buttons sticking out can be seen */
}

.pageHeader {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
}

.pageHeader h1 {
    font-size: 2rem;
    font-weight: 700;
    color: var(--foreground);
    background: linear-gradient(45deg, var(--primary), #a855f7);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
}

.dateFilter {
    display: flex;
    align-items: center;
    gap: 1rem;
    background: var(--card);
    padding: 0.5rem 1rem;
    border-radius: var(--radius);
    border: 1px solid var(--border);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.dateFilter input {
    background: var(--background);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 4px 8px;
    color: var(--foreground);
}

.btn {
    background: var(--primary);
    color: white;
    border: none;
    padding: 6px 16px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 500;
    transition: all 0.2s;
}

.btn:hover {
    opacity: 0.9;
    transform: translateY(-1px);
}

/* Detail Section */
.detailSection {
    margin-bottom: 2rem;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    overflow: hidden;
    animation: slideDown 0.3s ease-out;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.detailHeader {
    padding: 1rem 1.5rem;
    background: var(--card-color, #f3f4f6);
    border-bottom: 1px solid var(--border);
    font-weight: 600;
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.closeBtn {
    background: white;
    color: var(--card-color, #333);
    border: none;
    padding: 4px 12px;
    border-radius: 4px;
    font-size: 0.8rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.closeBtn:hover {
    background: #f9fafb;
    transform: translateY(-1px);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.15);
}

.detailTable {
    width: 100%;
    border-collapse: collapse;
}

.detailTable th {
    text-align: left;
    padding: 1rem;
    font-size: 0.85rem;
    color: var(--muted-foreground);
    border-bottom: 1px solid var(--border);
    background: rgba(0, 0, 0, 0.01);
}

.detailTable td {
    padding: 1rem;
    border-bottom: 1px solid var(--border);
    font-size: 0.9rem;
    color: var(--foreground);
}

.detailTable tr:last-child td {
    border-bottom: none;
}

/* Theme Colors classes */
.themePeach {
    --card-color: #f97316;
    --card-color-light: #ffedd5;
}

.themeBlue {
    --card-color: #3b82f6;
    --card-color-light: #dbeafe;
}

.themePink {
    --card-color: #ec4899;
    --card-color-light: #fce7f3;
}

.themeGrey {
    --card-color: #64748b;
    --card-color-light: #f1f5f9;
}

.themeYellow {
    --card-color: #eab308;
    --card-color-light: #fef9c3;
}

.themeGreen {
    --card-color: #22c55e;
    --card-color-light: #dcfce7;
}

/* Performance Charts Section */
.chartGrid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.chartCard {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
}

.chartHeader {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border);
}

.chartControls {
    display: flex;
    background: rgba(0, 0, 0, 0.05);
    /* Light gray bg for toggle track */
    padding: 2px;
    border-radius: 6px;
}

.controlBtn {
    border: none;
    background: transparent;
    padding: 4px 12px;
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--muted-foreground);
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
}

.controlBtnActive {
    background: var(--card);
    /* Or white */
    color: var(--foreground);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    font-weight: 600;
}

.chartTitle {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--foreground);
    margin-bottom: 0.25rem;
}

.chartSubtitle {
    font-size: 0.85rem;
    color: var(--muted-foreground);
}

.chartBody {
    position: relative;
    height: 300px;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    gap: 1.5rem;
    /* Increased gap for fewer bars (10 total) */
    padding: 1rem 0 2rem;
    /* Space for x-axis labels */
    margin-left: 3rem;
}

/* Y-Axis Grid Lines */
.gridLines {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 2rem;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    z-index: 0;
    pointer-events: none;
}

.gridLine {
    width: 100%;
    height: 1px;
    background: rgba(0, 0, 0, 0.05);
    position: relative;
}

.gridLine span {
    display: none;
}

/* Bar Columns */
.barColumn {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-end;
    height: 100%;
    position: relative;
    z-index: 1;
}

.barWrapper {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: flex-end;
    justify-content: center;
    position: relative;
}

.bar {
    width: 28px;
    border-radius: 6px 6px 0 0;
    transition: height 1s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s;
    position: relative;
    cursor: pointer;
}

.bar:hover {
    opacity: 0.8;
}

.barHaulingBest {
    background: linear-gradient(180deg, #1e3a8a 0%, #3b82f6 100%);
    /* Dark Blue -> Blue */
}

.barLoadingBest {
    background: linear-gradient(180deg, #581c87 0%, #a855f7 100%);
    /* Dark Purple -> Purple */
}

.barWorst {
    background: linear-gradient(180deg, #7f1d1d 0%, #ef4444 100%);
    /* Dark Red -> Red */
}

.barLabel {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%) rotate(-90deg);
    transform-origin: center center;
    font-size: 0.65rem;
    font-weight: 600;
    color: white;
    white-space: nowrap;
    z-index: 5;
    pointer-events: none;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.barWorst .barLabel {
    color: #333;
    text-shadow: none;
    font-weight: 700;
}

.barValue {
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    margin-bottom: 4px;
    font-size: 0.7rem;
    font-weight: 700;
    color: var(--foreground);
    white-space: nowrap;
    z-index: 5;
}

/* Tooltip on Hover */
.tooltip {
    position: absolute;
    top: -45px;
    left: 50%;
    transform: translateX(-50%) translateY(10px);
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 0.5rem 0.75rem;
    border-radius: 6px;
    font-size: 0.75rem;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: all 0.2s;
    z-index: 10;
}

.barWrapper:hover .tooltip {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
}

/* Add some padding to container to fit y-axis labels */
.chartBody {
    margin-left: 3rem;
}

/* Play/Pause Button */
.playPauseBtn {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: var(--foreground);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 60;
    transition: all 0.2s ease;
    opacity: 0;
    pointer-events: none;
}

.gridContainer:hover .playPauseBtn {
    opacity: 1;
    pointer-events: auto;
}

.playPauseBtn:hover {
    background: var(--primary);
    color: white;
    transform: translate(-50%, -50%) scale(1.1);
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
}

/* Chart Header Layout Update */
.chartHeader {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border);
    gap: 1rem;
}

.chartActions {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 0.5rem;
}

/* Metric Toggle Pill */
.togglePill {
    display: flex;
    background: rgba(0, 0, 0, 0.05);
    /* Light gray track */
    padding: 3px;
    border-radius: 20px;
    gap: 2px;
}

.pillBtn {
    border: none;
    background: transparent;
    padding: 4px 12px;
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--muted-foreground);
    border-radius: 16px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.pillBtn:hover {
    color: var(--foreground);
}

.pillActive {
    background: var(--card);
    /* White/Card bg */
    color: var(--primary);
    /* Highlight color */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    font-weight: 700;
}

/* New Bar Colors for Time Metric */
.barHaulingTime {
    background: linear-gradient(180deg, #0f766e 0%, #14b8a6 100%);
    /* Teal: Dark -> Light */
}

.barLoadingTime {
    background: linear-gradient(180deg, #b45309 0%, #f59e0b 100%);
    /* Amber: Dark -> Light */
}


/* NEW DASHBOARD PAGES STYLES - REVISED FOR PROFESSIONAL LOOK */

.gridThree {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.gridTwo {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
    margin-bottom: 2rem;
}

@media (max-width: 1024px) {

    .gridThree,
    .gridTwo {
        grid-template-columns: 1fr;
    }
}

.kpiCard {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    transition: transform 0.2s;
}

.kpiCard:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

.kpiLabel {
    font-size: 0.85rem;
    color: var(--muted-foreground);
    margin-bottom: 0.5rem;
    font-weight: 500;
}

.kpiValue {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--foreground);
}

.kpiSubtext {
    font-size: 0.8rem;
    margin-top: 0.25rem;
    opacity: 0.9;
}

.chartContainer {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1.5rem;
    height: 400px;
    /* Fixed Height for consistency */
    display: flex;
    flex-direction: column;
    justify-content: center;
    /* Center chart vertically */
}

/* For Donut Chart specifically, maybe smaller */
.chartContainerSmall {
    height: 350px;
}

.sectionTitle {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--foreground);
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border);
}

.controls {
    display: flex;
    gap: 1rem;
    align-items: center;
}

.dateInput {
    background: var(--card);
    border: 1px solid var(--border);
    color: var(--foreground);
    padding: 0.5rem;
    border-radius: 6px;
    outline: none;
    font-family: inherit;
}

.iconButton {
    padding: 0.5rem;
    border-radius: 6px;
    border: 1px solid transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 500;
    transition: all 0.2s;
}

.btnBlue {
    background: #eff6ff;
    color: #2563eb;
    border-color: #bfdbfe;
}

.btnBlue:hover {
    background: #dbeafe;
}

.btnGreen {
    background: #f0fdf4;
    color: #16a34a;
    border-color: #bbf7d0;
}

.btnGreen:hover {
    background: #dcfce7;
}

/* Dark mode overrides for buttons if needed, relying on vars is better but these are specific */
@media (prefers-color-scheme: dark) {
    .btnBlue {
        background: rgba(37, 99, 235, 0.2);
        color: #60a5fa;
        border-color: rgba(37, 99, 235, 0.3);
    }

    .btnGreen {
        background: rgba(22, 163, 74, 0.2);
        color: #4ade80;
        border-color: rgba(22, 163, 74, 0.3);
    }
}

.iconButton:hover {
    opacity: 0.9;
}

/* SOLID COLOR CARDS FOR HIGH CONTRAST */
.cardBlue {
    background-color: #2563eb;
    color: white !important;
}
.cardBlue .kpiLabel, .cardBlue .kpiValue, .cardBlue .kpiSubtext {
    color: white !important;
}
.cardBlue .kpiLabel { opacity: 0.8; }
.cardBlue .kpiSubtext { opacity: 0.9; }

.cardGreen {
    background-color: #16a34a;
    color: white !important;
}
.cardGreen .kpiLabel, .cardGreen .kpiValue, .cardGreen .kpiSubtext {
    color: white !important;
}
.cardGreen .kpiLabel { opacity: 0.8; }
.cardGreen .kpiSubtext { opacity: 0.9; }

.cardPurple {
    background-color: #9333ea;
    color: white !important;
}
.cardPurple .kpiLabel, .cardPurple .kpiValue, .cardPurple .kpiSubtext {
    color: white !important;
}
.cardPurple .kpiLabel { opacity: 0.8; }
.cardPurple .kpiSubtext { opacity: 0.9; }

.cardPink {
    background-color: #db2777;
    color: white !important;
}
.cardPink .kpiLabel, .cardPink .kpiValue, .cardPink .kpiSubtext {
    color: white !important;
}
.cardPink .kpiLabel { opacity: 0.8; }
.cardPink .kpiSubtext { opacity: 0.9; }

.cardIndigo {
    background-color: #4f46e5;
    color: white !important;
}
.cardIndigo .kpiLabel, .cardIndigo .kpiValue, .cardIndigo .kpiSubtext {
    color: white !important;
}
.cardIndigo .kpiLabel { opacity: 0.8; }
.cardIndigo .kpiSubtext { opacity: 0.9; }

.cardTeal {
    background-color: #0d9488;
    color: white !important;
}
.cardTeal .kpiLabel, .cardTeal .kpiValue, .cardTeal .kpiSubtext {
    color: white !important;
}
.cardTeal .kpiLabel { opacity: 0.8; }
.cardTeal .kpiSubtext { opacity: 0.9; }

